<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="/style.css"/>
</head>


 
<script>
    window.onload = (event) => {
        let dialogId = document.getElementById("dialogId").value
        let xml = new XMLHttpRequest();
        xml.open("POST", "/unseen-seen", true);
        xml.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
        xml.send(`dialogId=${dialogId}`);
    }
</script>

<body>
    <div class="targetsTable">
        <div id="fixed">
            
            <a href="/dashboard">Back to dashboard</a>
            <br/>
           
            
            <br/>
           
            <br/>
            </div>
        <br/>
       
          <div>
            <form action="/messages/<%= dialogId %>" method="POST">
                <div>
                    <textarea name="message" rows="20" cols="64" wrap="hard" placeholder="Write your message here" required></textarea>
                </div>
              
                <div>
                    <input type="submit" value="Send">
                </div>
            </form>
            <table>
                <br/>
                
                <% for (let i = messages.length - 1; i >= 0 ; i-- ) { %>
                    <tr>
                        <td>
                    <b><%= messages[i].author %></b>
                    <i>(on <%= messages[i].datetime %>):</i>
                    <br/>
                    <p><%= messages[i].message %></p>
                <% } %> 
            </td>
            </tr>
            
            
            </table>
        
    </div>
    </div>

   <input id="dialogId" type="hidden" value="<%= dialogId %>">

</body>

</html>